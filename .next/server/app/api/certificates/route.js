/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/certificates/route";
exports.ids = ["app/api/certificates/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcertificates%2Froute&page=%2Fapi%2Fcertificates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcertificates%2Froute.ts&appDir=D%3A%5CGitHub%5CEdu-Keychain%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CGitHub%5CEdu-Keychain&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcertificates%2Froute&page=%2Fapi%2Fcertificates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcertificates%2Froute.ts&appDir=D%3A%5CGitHub%5CEdu-Keychain%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CGitHub%5CEdu-Keychain&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_GitHub_Edu_Keychain_src_app_api_certificates_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/certificates/route.ts */ \"(rsc)/./src/app/api/certificates/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/certificates/route\",\n        pathname: \"/api/certificates\",\n        filename: \"route\",\n        bundlePath: \"app/api/certificates/route\"\n    },\n    resolvedPagePath: \"D:\\\\GitHub\\\\Edu-Keychain\\\\src\\\\app\\\\api\\\\certificates\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_GitHub_Edu_Keychain_src_app_api_certificates_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZjZXJ0aWZpY2F0ZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNlcnRpZmljYXRlcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNlcnRpZmljYXRlcyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDR2l0SHViJTVDRWR1LUtleWNoYWluJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDR2l0SHViJTVDRWR1LUtleWNoYWluJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNlO0FBQzVGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJEOlxcXFxHaXRIdWJcXFxcRWR1LUtleWNoYWluXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGNlcnRpZmljYXRlc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2VydGlmaWNhdGVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2VydGlmaWNhdGVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jZXJ0aWZpY2F0ZXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJEOlxcXFxHaXRIdWJcXFxcRWR1LUtleWNoYWluXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGNlcnRpZmljYXRlc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcertificates%2Froute&page=%2Fapi%2Fcertificates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcertificates%2Froute.ts&appDir=D%3A%5CGitHub%5CEdu-Keychain%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CGitHub%5CEdu-Keychain&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/certificates/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/certificates/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _lib_blockchain__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/blockchain */ \"(rsc)/./src/lib/blockchain.ts\");\n\n\n\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const studentId = searchParams.get('studentId');\n        const institutionId = searchParams.get('institutionId');\n        let whereClause = {};\n        if (studentId) whereClause.studentId = studentId;\n        if (institutionId) whereClause.institutionId = institutionId;\n        const certificates = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.certificate.findMany({\n            where: whereClause,\n            include: {\n                student: true,\n                institution: true\n            },\n            orderBy: {\n                issueDate: 'desc'\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: certificates\n        });\n    } catch (error) {\n        console.error('Error fetching certificates:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Failed to fetch certificates'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { studentId, institutionId, title, description, issueDate, expiryDate, fileUrl } = body;\n        // Verify student exists\n        const student = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.student.findUnique({\n            where: {\n                id: studentId\n            }\n        });\n        if (!student) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Student not found'\n            }, {\n                status: 404\n            });\n        }\n        // Verify institution exists\n        const institution = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.institution.findUnique({\n            where: {\n                id: institutionId\n            }\n        });\n        if (!institution) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Institution not found'\n            }, {\n                status: 404\n            });\n        }\n        // Create certificate\n        const certificate = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.certificate.create({\n            data: {\n                studentId,\n                institutionId,\n                title,\n                description: description || null,\n                issueDate: new Date(issueDate),\n                expiryDate: expiryDate ? new Date(expiryDate) : null,\n                fileUrl: fileUrl || null\n            },\n            include: {\n                student: true,\n                institution: true\n            }\n        });\n        // Generate blockchain hash\n        const blockchainHash = (0,_lib_blockchain__WEBPACK_IMPORTED_MODULE_2__.createCertificateHash)(certificate);\n        // Add to blockchain\n        const blockchainRecord = _lib_blockchain__WEBPACK_IMPORTED_MODULE_2__.blockchainService.addRecord(certificate.id, 'certificate', {\n            type: 'certificate',\n            record: certificate,\n            timestamp: new Date().toISOString()\n        });\n        // Update certificate with blockchain info\n        const updatedCertificate = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.certificate.update({\n            where: {\n                id: certificate.id\n            },\n            data: {\n                blockchainHash,\n                blockchainTx: _lib_blockchain__WEBPACK_IMPORTED_MODULE_2__.blockchainService.generateTransactionHash(blockchainRecord)\n            },\n            include: {\n                student: true,\n                institution: true\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: updatedCertificate\n        });\n    } catch (error) {\n        console.error('Error creating certificate:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Failed to create certificate'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jZXJ0aWZpY2F0ZXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBdUQ7QUFDMUI7QUFDOEM7QUFFcEUsZUFBZUksSUFBSUMsT0FBb0I7SUFDNUMsSUFBSTtRQUNGLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUYsUUFBUUcsR0FBRztRQUM1QyxNQUFNQyxZQUFZSCxhQUFhSSxHQUFHLENBQUM7UUFDbkMsTUFBTUMsZ0JBQWdCTCxhQUFhSSxHQUFHLENBQUM7UUFFdkMsSUFBSUUsY0FBbUIsQ0FBQztRQUV4QixJQUFJSCxXQUFXRyxZQUFZSCxTQUFTLEdBQUdBO1FBQ3ZDLElBQUlFLGVBQWVDLFlBQVlELGFBQWEsR0FBR0E7UUFFL0MsTUFBTUUsZUFBZSxNQUFNWix1Q0FBRUEsQ0FBQ2EsV0FBVyxDQUFDQyxRQUFRLENBQUM7WUFDakRDLE9BQU9KO1lBQ1BLLFNBQVM7Z0JBQ1BDLFNBQVM7Z0JBQ1RDLGFBQWE7WUFDZjtZQUNBQyxTQUFTO2dCQUNQQyxXQUFXO1lBQ2I7UUFDRjtRQUVBLE9BQU9yQixxREFBWUEsQ0FBQ3NCLElBQUksQ0FBQztZQUFFQyxTQUFTO1lBQU1DLE1BQU1YO1FBQWE7SUFDL0QsRUFBRSxPQUFPWSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE9BQU96QixxREFBWUEsQ0FBQ3NCLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPRSxPQUFPO1FBQStCLEdBQ3hEO1lBQUVFLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRU8sZUFBZUMsS0FBS3ZCLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNd0IsT0FBTyxNQUFNeEIsUUFBUWlCLElBQUk7UUFDL0IsTUFBTSxFQUNKYixTQUFTLEVBQ1RFLGFBQWEsRUFDYm1CLEtBQUssRUFDTEMsV0FBVyxFQUNYVixTQUFTLEVBQ1RXLFVBQVUsRUFDVkMsT0FBTyxFQUNSLEdBQUdKO1FBRUosd0JBQXdCO1FBQ3hCLE1BQU1YLFVBQVUsTUFBTWpCLHVDQUFFQSxDQUFDaUIsT0FBTyxDQUFDZ0IsVUFBVSxDQUFDO1lBQzFDbEIsT0FBTztnQkFBRW1CLElBQUkxQjtZQUFVO1FBQ3pCO1FBRUEsSUFBSSxDQUFDUyxTQUFTO1lBQ1osT0FBT2xCLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUN0QjtnQkFBRUMsU0FBUztnQkFBT0UsT0FBTztZQUFvQixHQUM3QztnQkFBRUUsUUFBUTtZQUFJO1FBRWxCO1FBRUEsNEJBQTRCO1FBQzVCLE1BQU1SLGNBQWMsTUFBTWxCLHVDQUFFQSxDQUFDa0IsV0FBVyxDQUFDZSxVQUFVLENBQUM7WUFDbERsQixPQUFPO2dCQUFFbUIsSUFBSXhCO1lBQWM7UUFDN0I7UUFFQSxJQUFJLENBQUNRLGFBQWE7WUFDaEIsT0FBT25CLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUN0QjtnQkFBRUMsU0FBUztnQkFBT0UsT0FBTztZQUF3QixHQUNqRDtnQkFBRUUsUUFBUTtZQUFJO1FBRWxCO1FBRUEscUJBQXFCO1FBQ3JCLE1BQU1iLGNBQWMsTUFBTWIsdUNBQUVBLENBQUNhLFdBQVcsQ0FBQ3NCLE1BQU0sQ0FBQztZQUM5Q1osTUFBTTtnQkFDSmY7Z0JBQ0FFO2dCQUNBbUI7Z0JBQ0FDLGFBQWFBLGVBQWU7Z0JBQzVCVixXQUFXLElBQUlnQixLQUFLaEI7Z0JBQ3BCVyxZQUFZQSxhQUFhLElBQUlLLEtBQUtMLGNBQWM7Z0JBQ2hEQyxTQUFTQSxXQUFXO1lBQ3RCO1lBQ0FoQixTQUFTO2dCQUNQQyxTQUFTO2dCQUNUQyxhQUFhO1lBQ2Y7UUFDRjtRQUVBLDJCQUEyQjtRQUMzQixNQUFNbUIsaUJBQWlCbkMsc0VBQXFCQSxDQUFDVztRQUU3QyxvQkFBb0I7UUFDcEIsTUFBTXlCLG1CQUFtQnJDLDhEQUFpQkEsQ0FBQ3NDLFNBQVMsQ0FDbEQxQixZQUFZcUIsRUFBRSxFQUNkLGVBQ0E7WUFDRU0sTUFBTTtZQUNOQyxRQUFRNUI7WUFDUjZCLFdBQVcsSUFBSU4sT0FBT08sV0FBVztRQUNuQztRQUdGLDBDQUEwQztRQUMxQyxNQUFNQyxxQkFBcUIsTUFBTTVDLHVDQUFFQSxDQUFDYSxXQUFXLENBQUNnQyxNQUFNLENBQUM7WUFDckQ5QixPQUFPO2dCQUFFbUIsSUFBSXJCLFlBQVlxQixFQUFFO1lBQUM7WUFDNUJYLE1BQU07Z0JBQ0pjO2dCQUNBUyxjQUFjN0MsOERBQWlCQSxDQUFDOEMsdUJBQXVCLENBQUNUO1lBQzFEO1lBQ0F0QixTQUFTO2dCQUNQQyxTQUFTO2dCQUNUQyxhQUFhO1lBQ2Y7UUFDRjtRQUVBLE9BQU9uQixxREFBWUEsQ0FBQ3NCLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUQyxNQUFNcUI7UUFDUjtJQUNGLEVBQUUsT0FBT3BCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBT3pCLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1lBQU9FLE9BQU87UUFBK0IsR0FDeEQ7WUFBRUUsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIkQ6XFxHaXRIdWJcXEVkdS1LZXljaGFpblxcc3JjXFxhcHBcXGFwaVxcY2VydGlmaWNhdGVzXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnQC9saWIvZGInXHJcbmltcG9ydCB7IGJsb2NrY2hhaW5TZXJ2aWNlLCBjcmVhdGVDZXJ0aWZpY2F0ZUhhc2ggfSBmcm9tICdAL2xpYi9ibG9ja2NoYWluJ1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcclxuICAgIGNvbnN0IHN0dWRlbnRJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0dWRlbnRJZCcpXHJcbiAgICBjb25zdCBpbnN0aXR1dGlvbklkID0gc2VhcmNoUGFyYW1zLmdldCgnaW5zdGl0dXRpb25JZCcpXHJcblxyXG4gICAgbGV0IHdoZXJlQ2xhdXNlOiBhbnkgPSB7fVxyXG4gICAgXHJcbiAgICBpZiAoc3R1ZGVudElkKSB3aGVyZUNsYXVzZS5zdHVkZW50SWQgPSBzdHVkZW50SWRcclxuICAgIGlmIChpbnN0aXR1dGlvbklkKSB3aGVyZUNsYXVzZS5pbnN0aXR1dGlvbklkID0gaW5zdGl0dXRpb25JZFxyXG5cclxuICAgIGNvbnN0IGNlcnRpZmljYXRlcyA9IGF3YWl0IGRiLmNlcnRpZmljYXRlLmZpbmRNYW55KHtcclxuICAgICAgd2hlcmU6IHdoZXJlQ2xhdXNlLFxyXG4gICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgc3R1ZGVudDogdHJ1ZSxcclxuICAgICAgICBpbnN0aXR1dGlvbjogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBvcmRlckJ5OiB7XHJcbiAgICAgICAgaXNzdWVEYXRlOiAnZGVzYydcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjZXJ0aWZpY2F0ZXMgfSlcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2VydGlmaWNhdGVzOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBjZXJ0aWZpY2F0ZXMnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHN0dWRlbnRJZCxcclxuICAgICAgaW5zdGl0dXRpb25JZCxcclxuICAgICAgdGl0bGUsXHJcbiAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICBpc3N1ZURhdGUsXHJcbiAgICAgIGV4cGlyeURhdGUsXHJcbiAgICAgIGZpbGVVcmxcclxuICAgIH0gPSBib2R5XHJcblxyXG4gICAgLy8gVmVyaWZ5IHN0dWRlbnQgZXhpc3RzXHJcbiAgICBjb25zdCBzdHVkZW50ID0gYXdhaXQgZGIuc3R1ZGVudC5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IHN0dWRlbnRJZCB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghc3R1ZGVudCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdTdHVkZW50IG5vdCBmb3VuZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDA0IH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFZlcmlmeSBpbnN0aXR1dGlvbiBleGlzdHNcclxuICAgIGNvbnN0IGluc3RpdHV0aW9uID0gYXdhaXQgZGIuaW5zdGl0dXRpb24uZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiBpbnN0aXR1dGlvbklkIH1cclxuICAgIH0pXHJcblxyXG4gICAgaWYgKCFpbnN0aXR1dGlvbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnN0aXR1dGlvbiBub3QgZm91bmQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgY2VydGlmaWNhdGVcclxuICAgIGNvbnN0IGNlcnRpZmljYXRlID0gYXdhaXQgZGIuY2VydGlmaWNhdGUuY3JlYXRlKHtcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHN0dWRlbnRJZCxcclxuICAgICAgICBpbnN0aXR1dGlvbklkLFxyXG4gICAgICAgIHRpdGxlLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB8fCBudWxsLFxyXG4gICAgICAgIGlzc3VlRGF0ZTogbmV3IERhdGUoaXNzdWVEYXRlKSxcclxuICAgICAgICBleHBpcnlEYXRlOiBleHBpcnlEYXRlID8gbmV3IERhdGUoZXhwaXJ5RGF0ZSkgOiBudWxsLFxyXG4gICAgICAgIGZpbGVVcmw6IGZpbGVVcmwgfHwgbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgc3R1ZGVudDogdHJ1ZSxcclxuICAgICAgICBpbnN0aXR1dGlvbjogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIGJsb2NrY2hhaW4gaGFzaFxyXG4gICAgY29uc3QgYmxvY2tjaGFpbkhhc2ggPSBjcmVhdGVDZXJ0aWZpY2F0ZUhhc2goY2VydGlmaWNhdGUpXHJcbiAgICBcclxuICAgIC8vIEFkZCB0byBibG9ja2NoYWluXHJcbiAgICBjb25zdCBibG9ja2NoYWluUmVjb3JkID0gYmxvY2tjaGFpblNlcnZpY2UuYWRkUmVjb3JkKFxyXG4gICAgICBjZXJ0aWZpY2F0ZS5pZCxcclxuICAgICAgJ2NlcnRpZmljYXRlJyxcclxuICAgICAge1xyXG4gICAgICAgIHR5cGU6ICdjZXJ0aWZpY2F0ZScsXHJcbiAgICAgICAgcmVjb3JkOiBjZXJ0aWZpY2F0ZSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgLy8gVXBkYXRlIGNlcnRpZmljYXRlIHdpdGggYmxvY2tjaGFpbiBpbmZvXHJcbiAgICBjb25zdCB1cGRhdGVkQ2VydGlmaWNhdGUgPSBhd2FpdCBkYi5jZXJ0aWZpY2F0ZS51cGRhdGUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogY2VydGlmaWNhdGUuaWQgfSxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIGJsb2NrY2hhaW5IYXNoLFxyXG4gICAgICAgIGJsb2NrY2hhaW5UeDogYmxvY2tjaGFpblNlcnZpY2UuZ2VuZXJhdGVUcmFuc2FjdGlvbkhhc2goYmxvY2tjaGFpblJlY29yZClcclxuICAgICAgfSxcclxuICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgIHN0dWRlbnQ6IHRydWUsXHJcbiAgICAgICAgaW5zdGl0dXRpb246IHRydWVcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcclxuICAgICAgc3VjY2VzczogdHJ1ZSwgXHJcbiAgICAgIGRhdGE6IHVwZGF0ZWRDZXJ0aWZpY2F0ZSBcclxuICAgIH0pXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNlcnRpZmljYXRlOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgY2VydGlmaWNhdGUnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJkYiIsImJsb2NrY2hhaW5TZXJ2aWNlIiwiY3JlYXRlQ2VydGlmaWNhdGVIYXNoIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInN0dWRlbnRJZCIsImdldCIsImluc3RpdHV0aW9uSWQiLCJ3aGVyZUNsYXVzZSIsImNlcnRpZmljYXRlcyIsImNlcnRpZmljYXRlIiwiZmluZE1hbnkiLCJ3aGVyZSIsImluY2x1ZGUiLCJzdHVkZW50IiwiaW5zdGl0dXRpb24iLCJvcmRlckJ5IiwiaXNzdWVEYXRlIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwic3RhdHVzIiwiUE9TVCIsImJvZHkiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZXhwaXJ5RGF0ZSIsImZpbGVVcmwiLCJmaW5kVW5pcXVlIiwiaWQiLCJjcmVhdGUiLCJEYXRlIiwiYmxvY2tjaGFpbkhhc2giLCJibG9ja2NoYWluUmVjb3JkIiwiYWRkUmVjb3JkIiwidHlwZSIsInJlY29yZCIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwidXBkYXRlZENlcnRpZmljYXRlIiwidXBkYXRlIiwiYmxvY2tjaGFpblR4IiwiZ2VuZXJhdGVUcmFuc2FjdGlvbkhhc2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/certificates/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/blockchain.ts":
/*!*******************************!*\
  !*** ./src/lib/blockchain.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   blockchainService: () => (/* binding */ blockchainService),\n/* harmony export */   createAcademicHash: () => (/* binding */ createAcademicHash),\n/* harmony export */   createAthleticHash: () => (/* binding */ createAthleticHash),\n/* harmony export */   createCertificateHash: () => (/* binding */ createCertificateHash),\n/* harmony export */   verifyAcademicRecord: () => (/* binding */ verifyAcademicRecord),\n/* harmony export */   verifyAthleticRecord: () => (/* binding */ verifyAthleticRecord),\n/* harmony export */   verifyCertificate: () => (/* binding */ verifyCertificate)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nclass BlockchainService {\n    constructor(){\n        this.chain = [];\n        this.difficulty = 4;\n        this.pendingRecords = [];\n        this.createGenesisBlock();\n    }\n    createGenesisBlock() {\n        const genesisBlock = {\n            id: 'genesis',\n            type: 'academic',\n            data: {\n                message: 'Genesis Block - Educational Passport System'\n            },\n            timestamp: Date.now(),\n            hash: this.calculateHash({\n                id: 'genesis',\n                type: 'academic',\n                data: {\n                    message: 'Genesis Block - Educational Passport System'\n                },\n                timestamp: Date.now(),\n                nonce: 0\n            }),\n            nonce: 0\n        };\n        this.chain.push(genesisBlock);\n    }\n    calculateHash(record) {\n        return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash('sha256').update(JSON.stringify({\n            id: record.id,\n            type: record.type,\n            data: record.data,\n            timestamp: record.timestamp,\n            previousHash: record.previousHash || '',\n            nonce: record.nonce\n        })).digest('hex');\n    }\n    mineBlock(record) {\n        let nonce = 0;\n        let hash;\n        const previousHash = this.chain[this.chain.length - 1]?.hash;\n        do {\n            nonce++;\n            hash = this.calculateHash({\n                ...record,\n                previousHash,\n                nonce\n            });\n        }while (hash.substring(0, this.difficulty) !== Array(this.difficulty + 1).join('0'));\n        return {\n            ...record,\n            previousHash,\n            hash,\n            nonce\n        };\n    }\n    addRecord(id, type, data) {\n        const record = {\n            id,\n            type,\n            data,\n            timestamp: Date.now()\n        };\n        const minedBlock = this.mineBlock(record);\n        this.chain.push(minedBlock);\n        return minedBlock;\n    }\n    verifyRecord(recordId) {\n        const record = this.chain.find((r)=>r.id === recordId);\n        if (!record) return false;\n        const recalculatedHash = this.calculateHash({\n            id: record.id,\n            type: record.type,\n            data: record.data,\n            timestamp: record.timestamp,\n            previousHash: record.previousHash || '',\n            nonce: record.nonce\n        });\n        return recalculatedHash === record.hash;\n    }\n    getRecord(recordId) {\n        return this.chain.find((r)=>r.id === recordId) || null;\n    }\n    getAllRecords() {\n        return [\n            ...this.chain\n        ];\n    }\n    isChainValid() {\n        for(let i = 1; i < this.chain.length; i++){\n            const currentRecord = this.chain[i];\n            const previousRecord = this.chain[i - 1];\n            // Verify current record's hash\n            const recalculatedHash = this.calculateHash({\n                id: currentRecord.id,\n                type: currentRecord.type,\n                data: currentRecord.data,\n                timestamp: currentRecord.timestamp,\n                previousHash: currentRecord.previousHash || '',\n                nonce: currentRecord.nonce\n            });\n            if (recalculatedHash !== currentRecord.hash) {\n                return false;\n            }\n            // Verify chain linkage\n            if (currentRecord.previousHash !== previousRecord.hash) {\n                return false;\n            }\n        }\n        return true;\n    }\n    generateTransactionHash(data) {\n        const timestamp = Date.now();\n        const randomNonce = Math.floor(Math.random() * 1000000);\n        return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash('sha256').update(JSON.stringify({\n            data,\n            timestamp,\n            randomNonce\n        })).digest('hex');\n    }\n    createDigitalSignature(data, privateKey) {\n        const sign = crypto__WEBPACK_IMPORTED_MODULE_0___default().createSign('RSA-SHA256');\n        sign.update(JSON.stringify(data));\n        return sign.sign(privateKey, 'hex');\n    }\n    verifyDigitalSignature(data, signature, publicKey) {\n        const verify = crypto__WEBPACK_IMPORTED_MODULE_0___default().createVerify('RSA-SHA256');\n        verify.update(JSON.stringify(data));\n        return verify.verify(publicKey, signature, 'hex');\n    }\n    generateMerkleRoot(records) {\n        if (records.length === 0) return '';\n        if (records.length === 1) return records[0];\n        const nextLevel = [];\n        for(let i = 0; i < records.length; i += 2){\n            const left = records[i];\n            const right = records[i + 1] || left;\n            const combined = left + right;\n            nextLevel.push(crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash('sha256').update(combined).digest('hex'));\n        }\n        return this.generateMerkleRoot(nextLevel);\n    }\n    getChainStats() {\n        return {\n            totalBlocks: this.chain.length,\n            isValid: this.isChainValid(),\n            lastBlock: this.chain[this.chain.length - 1],\n            difficulty: this.difficulty\n        };\n    }\n}\n// Singleton instance\nconst blockchainService = new BlockchainService();\n// Helper functions for educational records\nconst createAcademicHash = (record)=>{\n    const data = {\n        studentId: record.studentId,\n        institution: record.institution,\n        title: record.title,\n        degree: record.degree,\n        field: record.field,\n        startDate: record.startDate,\n        endDate: record.endDate,\n        grade: record.grade,\n        gpa: record.gpa\n    };\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash('sha256').update(JSON.stringify(data)).digest('hex');\n};\nconst createAthleticHash = (record)=>{\n    const data = {\n        studentId: record.studentId,\n        sport: record.sport,\n        achievement: record.achievement,\n        competition: record.competition,\n        date: record.date,\n        position: record.position,\n        record: record.record\n    };\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash('sha256').update(JSON.stringify(data)).digest('hex');\n};\nconst createCertificateHash = (record)=>{\n    const data = {\n        studentId: record.studentId,\n        institution: record.institution,\n        title: record.title,\n        description: record.description,\n        issueDate: record.issueDate,\n        expiryDate: record.expiryDate\n    };\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash('sha256').update(JSON.stringify(data)).digest('hex');\n};\n// Verification functions\nconst verifyAcademicRecord = (record, blockchainHash)=>{\n    const calculatedHash = createAcademicHash(record);\n    return calculatedHash === blockchainHash;\n};\nconst verifyAthleticRecord = (record, blockchainHash)=>{\n    const calculatedHash = createAthleticHash(record);\n    return calculatedHash === blockchainHash;\n};\nconst verifyCertificate = (record, blockchainHash)=>{\n    const calculatedHash = createCertificateHash(record);\n    return calculatedHash === blockchainHash;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUUsV0FBVztRQUMvQkMsV0FBV3BFLE9BQU9vRSxTQUFTO1FBQzNCQyxZQUFZckUsT0FBT3FFLFVBQVU7SUFDL0I7SUFFQSxPQUFPeEYsd0RBQWlCLENBQUMsVUFBVXFCLE1BQU0sQ0FBQ0MsS0FBS0MsU0FBUyxDQUFDYixPQUFPZSxNQUFNLENBQUM7QUFDekUsRUFBQztBQUVELHlCQUF5QjtBQUNsQixNQUFNZ0UsdUJBQXVCLENBQUN0RSxRQUFhdUU7SUFDaEQsTUFBTUMsaUJBQWlCdEIsbUJBQW1CbEQ7SUFDMUMsT0FBT3dFLG1CQUFtQkQ7QUFDNUIsRUFBQztBQUVNLE1BQU1FLHVCQUF1QixDQUFDekUsUUFBYXVFO0lBQ2hELE1BQU1DLGlCQUFpQlosbUJBQW1CNUQ7SUFDMUMsT0FBT3dFLG1CQUFtQkQ7QUFDNUIsRUFBQztBQUVNLE1BQU1HLG9CQUFvQixDQUFDMUUsUUFBYXVFO0lBQzdDLE1BQU1DLGlCQUFpQk4sc0JBQXNCbEU7SUFDN0MsT0FBT3dFLG1CQUFtQkQ7QUFDNUIsRUFBQyIsInNvdXJjZXMiOlsiRDpcXEdpdEh1YlxcRWR1LUtleWNoYWluXFxzcmNcXGxpYlxcYmxvY2tjaGFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0bydcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmxvY2tjaGFpblJlY29yZCB7XHJcbiAgaWQ6IHN0cmluZ1xyXG4gIHR5cGU6ICdhY2FkZW1pYycgfCAnYXRobGV0aWMnIHwgJ2NlcnRpZmljYXRlJ1xyXG4gIGRhdGE6IGFueVxyXG4gIHRpbWVzdGFtcDogbnVtYmVyXHJcbiAgcHJldmlvdXNIYXNoPzogc3RyaW5nXHJcbiAgaGFzaDogc3RyaW5nXHJcbiAgbm9uY2U6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJsb2NrY2hhaW5UcmFuc2FjdGlvbiB7XHJcbiAgdHhIYXNoOiBzdHJpbmdcclxuICBibG9ja051bWJlcjogbnVtYmVyXHJcbiAgdGltZXN0YW1wOiBudW1iZXJcclxuICBmcm9tOiBzdHJpbmdcclxuICB0bzogc3RyaW5nXHJcbiAgZGF0YTogc3RyaW5nXHJcbiAgc2lnbmF0dXJlOiBzdHJpbmdcclxufVxyXG5cclxuY2xhc3MgQmxvY2tjaGFpblNlcnZpY2Uge1xyXG4gIHByaXZhdGUgY2hhaW46IEJsb2NrY2hhaW5SZWNvcmRbXSA9IFtdXHJcbiAgcHJpdmF0ZSBkaWZmaWN1bHR5OiBudW1iZXIgPSA0XHJcbiAgcHJpdmF0ZSBwZW5kaW5nUmVjb3JkczogQmxvY2tjaGFpblJlY29yZFtdID0gW11cclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmNyZWF0ZUdlbmVzaXNCbG9jaygpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUdlbmVzaXNCbG9jaygpOiB2b2lkIHtcclxuICAgIGNvbnN0IGdlbmVzaXNCbG9jazogQmxvY2tjaGFpblJlY29yZCA9IHtcclxuICAgICAgaWQ6ICdnZW5lc2lzJyxcclxuICAgICAgdHlwZTogJ2FjYWRlbWljJyxcclxuICAgICAgZGF0YTogeyBtZXNzYWdlOiAnR2VuZXNpcyBCbG9jayAtIEVkdWNhdGlvbmFsIFBhc3Nwb3J0IFN5c3RlbScgfSxcclxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICBoYXNoOiB0aGlzLmNhbGN1bGF0ZUhhc2goe1xyXG4gICAgICAgIGlkOiAnZ2VuZXNpcycsXHJcbiAgICAgICAgdHlwZTogJ2FjYWRlbWljJyxcclxuICAgICAgICBkYXRhOiB7IG1lc3NhZ2U6ICdHZW5lc2lzIEJsb2NrIC0gRWR1Y2F0aW9uYWwgUGFzc3BvcnQgU3lzdGVtJyB9LFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICBub25jZTogMFxyXG4gICAgICB9KSxcclxuICAgICAgbm9uY2U6IDBcclxuICAgIH1cclxuICAgIHRoaXMuY2hhaW4ucHVzaChnZW5lc2lzQmxvY2spXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNhbGN1bGF0ZUhhc2gocmVjb3JkOiBPbWl0PEJsb2NrY2hhaW5SZWNvcmQsICdoYXNoJz4pOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGNyeXB0b1xyXG4gICAgICAuY3JlYXRlSGFzaCgnc2hhMjU2JylcclxuICAgICAgLnVwZGF0ZShcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBpZDogcmVjb3JkLmlkLFxyXG4gICAgICAgICAgdHlwZTogcmVjb3JkLnR5cGUsXHJcbiAgICAgICAgICBkYXRhOiByZWNvcmQuZGF0YSxcclxuICAgICAgICAgIHRpbWVzdGFtcDogcmVjb3JkLnRpbWVzdGFtcCxcclxuICAgICAgICAgIHByZXZpb3VzSGFzaDogcmVjb3JkLnByZXZpb3VzSGFzaCB8fCAnJyxcclxuICAgICAgICAgIG5vbmNlOiByZWNvcmQubm9uY2VcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICAgIC5kaWdlc3QoJ2hleCcpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG1pbmVCbG9jayhyZWNvcmQ6IE9taXQ8QmxvY2tjaGFpblJlY29yZCwgJ2hhc2gnIHwgJ25vbmNlJz4pOiBCbG9ja2NoYWluUmVjb3JkIHtcclxuICAgIGxldCBub25jZSA9IDBcclxuICAgIGxldCBoYXNoOiBzdHJpbmdcclxuICAgIGNvbnN0IHByZXZpb3VzSGFzaCA9IHRoaXMuY2hhaW5bdGhpcy5jaGFpbi5sZW5ndGggLSAxXT8uaGFzaFxyXG5cclxuICAgIGRvIHtcclxuICAgICAgbm9uY2UrK1xyXG4gICAgICBoYXNoID0gdGhpcy5jYWxjdWxhdGVIYXNoKHtcclxuICAgICAgICAuLi5yZWNvcmQsXHJcbiAgICAgICAgcHJldmlvdXNIYXNoLFxyXG4gICAgICAgIG5vbmNlXHJcbiAgICAgIH0pXHJcbiAgICB9IHdoaWxlIChoYXNoLnN1YnN0cmluZygwLCB0aGlzLmRpZmZpY3VsdHkpICE9PSBBcnJheSh0aGlzLmRpZmZpY3VsdHkgKyAxKS5qb2luKCcwJykpXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLi4ucmVjb3JkLFxyXG4gICAgICBwcmV2aW91c0hhc2gsXHJcbiAgICAgIGhhc2gsXHJcbiAgICAgIG5vbmNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkUmVjb3JkKFxyXG4gICAgaWQ6IHN0cmluZyxcclxuICAgIHR5cGU6ICdhY2FkZW1pYycgfCAnYXRobGV0aWMnIHwgJ2NlcnRpZmljYXRlJyxcclxuICAgIGRhdGE6IGFueVxyXG4gICk6IEJsb2NrY2hhaW5SZWNvcmQge1xyXG4gICAgY29uc3QgcmVjb3JkOiBPbWl0PEJsb2NrY2hhaW5SZWNvcmQsICdoYXNoJyB8ICdub25jZSc+ID0ge1xyXG4gICAgICBpZCxcclxuICAgICAgdHlwZSxcclxuICAgICAgZGF0YSxcclxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWluZWRCbG9jayA9IHRoaXMubWluZUJsb2NrKHJlY29yZClcclxuICAgIHRoaXMuY2hhaW4ucHVzaChtaW5lZEJsb2NrKVxyXG4gICAgcmV0dXJuIG1pbmVkQmxvY2tcclxuICB9XHJcblxyXG4gIHB1YmxpYyB2ZXJpZnlSZWNvcmQocmVjb3JkSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgcmVjb3JkID0gdGhpcy5jaGFpbi5maW5kKHIgPT4gci5pZCA9PT0gcmVjb3JkSWQpXHJcbiAgICBpZiAoIXJlY29yZCkgcmV0dXJuIGZhbHNlXHJcblxyXG4gICAgY29uc3QgcmVjYWxjdWxhdGVkSGFzaCA9IHRoaXMuY2FsY3VsYXRlSGFzaCh7XHJcbiAgICAgIGlkOiByZWNvcmQuaWQsXHJcbiAgICAgIHR5cGU6IHJlY29yZC50eXBlLFxyXG4gICAgICBkYXRhOiByZWNvcmQuZGF0YSxcclxuICAgICAgdGltZXN0YW1wOiByZWNvcmQudGltZXN0YW1wLFxyXG4gICAgICBwcmV2aW91c0hhc2g6IHJlY29yZC5wcmV2aW91c0hhc2ggfHwgJycsXHJcbiAgICAgIG5vbmNlOiByZWNvcmQubm9uY2VcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHJlY2FsY3VsYXRlZEhhc2ggPT09IHJlY29yZC5oYXNoXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0UmVjb3JkKHJlY29yZElkOiBzdHJpbmcpOiBCbG9ja2NoYWluUmVjb3JkIHwgbnVsbCB7XHJcbiAgICByZXR1cm4gdGhpcy5jaGFpbi5maW5kKHIgPT4gci5pZCA9PT0gcmVjb3JkSWQpIHx8IG51bGxcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRBbGxSZWNvcmRzKCk6IEJsb2NrY2hhaW5SZWNvcmRbXSB7XHJcbiAgICByZXR1cm4gWy4uLnRoaXMuY2hhaW5dXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaXNDaGFpblZhbGlkKCk6IGJvb2xlYW4ge1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmNoYWluLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRSZWNvcmQgPSB0aGlzLmNoYWluW2ldXHJcbiAgICAgIGNvbnN0IHByZXZpb3VzUmVjb3JkID0gdGhpcy5jaGFpbltpIC0gMV1cclxuXHJcbiAgICAgIC8vIFZlcmlmeSBjdXJyZW50IHJlY29yZCdzIGhhc2hcclxuICAgICAgY29uc3QgcmVjYWxjdWxhdGVkSGFzaCA9IHRoaXMuY2FsY3VsYXRlSGFzaCh7XHJcbiAgICAgICAgaWQ6IGN1cnJlbnRSZWNvcmQuaWQsXHJcbiAgICAgICAgdHlwZTogY3VycmVudFJlY29yZC50eXBlLFxyXG4gICAgICAgIGRhdGE6IGN1cnJlbnRSZWNvcmQuZGF0YSxcclxuICAgICAgICB0aW1lc3RhbXA6IGN1cnJlbnRSZWNvcmQudGltZXN0YW1wLFxyXG4gICAgICAgIHByZXZpb3VzSGFzaDogY3VycmVudFJlY29yZC5wcmV2aW91c0hhc2ggfHwgJycsXHJcbiAgICAgICAgbm9uY2U6IGN1cnJlbnRSZWNvcmQubm9uY2VcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGlmIChyZWNhbGN1bGF0ZWRIYXNoICE9PSBjdXJyZW50UmVjb3JkLmhhc2gpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVmVyaWZ5IGNoYWluIGxpbmthZ2VcclxuICAgICAgaWYgKGN1cnJlbnRSZWNvcmQucHJldmlvdXNIYXNoICE9PSBwcmV2aW91c1JlY29yZC5oYXNoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2VuZXJhdGVUcmFuc2FjdGlvbkhhc2goZGF0YTogYW55KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KClcclxuICAgIGNvbnN0IHJhbmRvbU5vbmNlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMClcclxuICAgIFxyXG4gICAgcmV0dXJuIGNyeXB0b1xyXG4gICAgICAuY3JlYXRlSGFzaCgnc2hhMjU2JylcclxuICAgICAgLnVwZGF0ZShKU09OLnN0cmluZ2lmeSh7IGRhdGEsIHRpbWVzdGFtcCwgcmFuZG9tTm9uY2UgfSkpXHJcbiAgICAgIC5kaWdlc3QoJ2hleCcpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY3JlYXRlRGlnaXRhbFNpZ25hdHVyZShkYXRhOiBhbnksIHByaXZhdGVLZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBzaWduID0gY3J5cHRvLmNyZWF0ZVNpZ24oJ1JTQS1TSEEyNTYnKVxyXG4gICAgc2lnbi51cGRhdGUoSlNPTi5zdHJpbmdpZnkoZGF0YSkpXHJcbiAgICByZXR1cm4gc2lnbi5zaWduKHByaXZhdGVLZXksICdoZXgnKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHZlcmlmeURpZ2l0YWxTaWduYXR1cmUoZGF0YTogYW55LCBzaWduYXR1cmU6IHN0cmluZywgcHVibGljS2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHZlcmlmeSA9IGNyeXB0by5jcmVhdGVWZXJpZnkoJ1JTQS1TSEEyNTYnKVxyXG4gICAgdmVyaWZ5LnVwZGF0ZShKU09OLnN0cmluZ2lmeShkYXRhKSlcclxuICAgIHJldHVybiB2ZXJpZnkudmVyaWZ5KHB1YmxpY0tleSwgc2lnbmF0dXJlLCAnaGV4JylcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZW5lcmF0ZU1lcmtsZVJvb3QocmVjb3Jkczogc3RyaW5nW10pOiBzdHJpbmcge1xyXG4gICAgaWYgKHJlY29yZHMubGVuZ3RoID09PSAwKSByZXR1cm4gJydcclxuICAgIGlmIChyZWNvcmRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHJlY29yZHNbMF1cclxuXHJcbiAgICBjb25zdCBuZXh0TGV2ZWw6IHN0cmluZ1tdID0gW11cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjb3Jkcy5sZW5ndGg7IGkgKz0gMikge1xyXG4gICAgICBjb25zdCBsZWZ0ID0gcmVjb3Jkc1tpXVxyXG4gICAgICBjb25zdCByaWdodCA9IHJlY29yZHNbaSArIDFdIHx8IGxlZnRcclxuICAgICAgY29uc3QgY29tYmluZWQgPSBsZWZ0ICsgcmlnaHRcclxuICAgICAgbmV4dExldmVsLnB1c2goY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShjb21iaW5lZCkuZGlnZXN0KCdoZXgnKSlcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZU1lcmtsZVJvb3QobmV4dExldmVsKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldENoYWluU3RhdHMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3RhbEJsb2NrczogdGhpcy5jaGFpbi5sZW5ndGgsXHJcbiAgICAgIGlzVmFsaWQ6IHRoaXMuaXNDaGFpblZhbGlkKCksXHJcbiAgICAgIGxhc3RCbG9jazogdGhpcy5jaGFpblt0aGlzLmNoYWluLmxlbmd0aCAtIDFdLFxyXG4gICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIFNpbmdsZXRvbiBpbnN0YW5jZVxyXG5leHBvcnQgY29uc3QgYmxvY2tjaGFpblNlcnZpY2UgPSBuZXcgQmxvY2tjaGFpblNlcnZpY2UoKVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgZWR1Y2F0aW9uYWwgcmVjb3Jkc1xyXG5leHBvcnQgY29uc3QgY3JlYXRlQWNhZGVtaWNIYXNoID0gKHJlY29yZDogYW55KTogc3RyaW5nID0+IHtcclxuICBjb25zdCBkYXRhID0ge1xyXG4gICAgc3R1ZGVudElkOiByZWNvcmQuc3R1ZGVudElkLFxyXG4gICAgaW5zdGl0dXRpb246IHJlY29yZC5pbnN0aXR1dGlvbixcclxuICAgIHRpdGxlOiByZWNvcmQudGl0bGUsXHJcbiAgICBkZWdyZWU6IHJlY29yZC5kZWdyZWUsXHJcbiAgICBmaWVsZDogcmVjb3JkLmZpZWxkLFxyXG4gICAgc3RhcnREYXRlOiByZWNvcmQuc3RhcnREYXRlLFxyXG4gICAgZW5kRGF0ZTogcmVjb3JkLmVuZERhdGUsXHJcbiAgICBncmFkZTogcmVjb3JkLmdyYWRlLFxyXG4gICAgZ3BhOiByZWNvcmQuZ3BhXHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKEpTT04uc3RyaW5naWZ5KGRhdGEpKS5kaWdlc3QoJ2hleCcpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVBdGhsZXRpY0hhc2ggPSAocmVjb3JkOiBhbnkpOiBzdHJpbmcgPT4ge1xyXG4gIGNvbnN0IGRhdGEgPSB7XHJcbiAgICBzdHVkZW50SWQ6IHJlY29yZC5zdHVkZW50SWQsXHJcbiAgICBzcG9ydDogcmVjb3JkLnNwb3J0LFxyXG4gICAgYWNoaWV2ZW1lbnQ6IHJlY29yZC5hY2hpZXZlbWVudCxcclxuICAgIGNvbXBldGl0aW9uOiByZWNvcmQuY29tcGV0aXRpb24sXHJcbiAgICBkYXRlOiByZWNvcmQuZGF0ZSxcclxuICAgIHBvc2l0aW9uOiByZWNvcmQucG9zaXRpb24sXHJcbiAgICByZWNvcmQ6IHJlY29yZC5yZWNvcmRcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUoSlNPTi5zdHJpbmdpZnkoZGF0YSkpLmRpZ2VzdCgnaGV4JylcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNlcnRpZmljYXRlSGFzaCA9IChyZWNvcmQ6IGFueSk6IHN0cmluZyA9PiB7XHJcbiAgY29uc3QgZGF0YSA9IHtcclxuICAgIHN0dWRlbnRJZDogcmVjb3JkLnN0dWRlbnRJZCxcclxuICAgIGluc3RpdHV0aW9uOiByZWNvcmQuaW5zdGl0dXRpb24sXHJcbiAgICB0aXRsZTogcmVjb3JkLnRpdGxlLFxyXG4gICAgZGVzY3JpcHRpb246IHJlY29yZC5kZXNjcmlwdGlvbixcclxuICAgIGlzc3VlRGF0ZTogcmVjb3JkLmlzc3VlRGF0ZSxcclxuICAgIGV4cGlyeURhdGU6IHJlY29yZC5leHBpcnlEYXRlXHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKEpTT04uc3RyaW5naWZ5KGRhdGEpKS5kaWdlc3QoJ2hleCcpXHJcbn1cclxuXHJcbi8vIFZlcmlmaWNhdGlvbiBmdW5jdGlvbnNcclxuZXhwb3J0IGNvbnN0IHZlcmlmeUFjYWRlbWljUmVjb3JkID0gKHJlY29yZDogYW55LCBibG9ja2NoYWluSGFzaDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XHJcbiAgY29uc3QgY2FsY3VsYXRlZEhhc2ggPSBjcmVhdGVBY2FkZW1pY0hhc2gocmVjb3JkKVxyXG4gIHJldHVybiBjYWxjdWxhdGVkSGFzaCA9PT0gYmxvY2tjaGFpbkhhc2hcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHZlcmlmeUF0aGxldGljUmVjb3JkID0gKHJlY29yZDogYW55LCBibG9ja2NoYWluSGFzaDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XHJcbiAgY29uc3QgY2FsY3VsYXRlZEhhc2ggPSBjcmVhdGVBdGhsZXRpY0hhc2gocmVjb3JkKVxyXG4gIHJldHVybiBjYWxjdWxhdGVkSGFzaCA9PT0gYmxvY2tjaGFpbkhhc2hcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHZlcmlmeUNlcnRpZmljYXRlID0gKHJlY29yZDogYW55LCBibG9ja2NoYWluSGFzaDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XHJcbiAgY29uc3QgY2FsY3VsYXRlZEhhc2ggPSBjcmVhdGVDZXJ0aWZpY2F0ZUhhc2gocmVjb3JkKVxyXG4gIHJldHVybiBjYWxjdWxhdGVkSGFzaCA9PT0gYmxvY2tjaGFpbkhhc2hcclxufSJdLCJuYW1lcyI6WyJjcnlwdG8iLCJCbG9ja2NoYWluU2VydmljZSIsImNvbnN0cnVjdG9yIiwiY2hhaW4iLCJkaWZmaWN1bHR5IiwicGVuZGluZ1JlY29yZHMiLCJjcmVhdGVHZW5lc2lzQmxvY2siLCJnZW5lc2lzQmxvY2siLCJpZCIsInR5cGUiLCJkYXRhIiwibWVzc2FnZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJoYXNoIiwiY2FsY3VsYXRlSGFzaCIsIm5vbmNlIiwicHVzaCIsInJlY29yZCIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJKU09OIiwic3RyaW5naWZ5IiwicHJldmlvdXNIYXNoIiwiZGlnZXN0IiwibWluZUJsb2NrIiwibGVuZ3RoIiwic3Vic3RyaW5nIiwiQXJyYXkiLCJqb2luIiwiYWRkUmVjb3JkIiwibWluZWRCbG9jayIsInZlcmlmeVJlY29yZCIsInJlY29yZElkIiwiZmluZCIsInIiLCJyZWNhbGN1bGF0ZWRIYXNoIiwiZ2V0UmVjb3JkIiwiZ2V0QWxsUmVjb3JkcyIsImlzQ2hhaW5WYWxpZCIsImkiLCJjdXJyZW50UmVjb3JkIiwicHJldmlvdXNSZWNvcmQiLCJnZW5lcmF0ZVRyYW5zYWN0aW9uSGFzaCIsInJhbmRvbU5vbmNlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY3JlYXRlRGlnaXRhbFNpZ25hdHVyZSIsInByaXZhdGVLZXkiLCJzaWduIiwiY3JlYXRlU2lnbiIsInZlcmlmeURpZ2l0YWxTaWduYXR1cmUiLCJzaWduYXR1cmUiLCJwdWJsaWNLZXkiLCJ2ZXJpZnkiLCJjcmVhdGVWZXJpZnkiLCJnZW5lcmF0ZU1lcmtsZVJvb3QiLCJyZWNvcmRzIiwibmV4dExldmVsIiwibGVmdCIsInJpZ2h0IiwiY29tYmluZWQiLCJnZXRDaGFpblN0YXRzIiwidG90YWxCbG9ja3MiLCJpc1ZhbGlkIiwibGFzdEJsb2NrIiwiYmxvY2tjaGFpblNlcnZpY2UiLCJjcmVhdGVBY2FkZW1pY0hhc2giLCJzdHVkZW50SWQiLCJpbnN0aXR1dGlvbiIsInRpdGxlIiwiZGVncmVlIiwiZmllbGQiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiZ3JhZGUiLCJncGEiLCJjcmVhdGVBdGhsZXRpY0hhc2giLCJzcG9ydCIsImFjaGlldmVtZW50IiwiY29tcGV0aXRpb24iLCJkYXRlIiwicG9zaXRpb24iLCJjcmVhdGVDZXJ0aWZpY2F0ZUhhc2giLCJkZXNjcmlwdGlvbiIsImlzc3VlRGF0ZSIsImV4cGlyeURhdGUiLCJ2ZXJpZnlBY2FkZW1pY1JlY29yZCIsImJsb2NrY2hhaW5IYXNoIiwiY2FsY3VsYXRlZEhhc2giLCJ2ZXJpZnlBdGhsZXRpY1JlY29yZCIsInZlcmlmeUNlcnRpZmljYXRlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/blockchain.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst db = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        'query'\n    ]\n});\nif (true) globalForPrisma.prisma = db;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLEtBQ1hGLGdCQUFnQkcsTUFBTSxJQUN0QixJQUFJSix3REFBWUEsQ0FBQztJQUNmSyxLQUFLO1FBQUM7S0FBUTtBQUNoQixHQUFFO0FBRUosSUFBSUMsSUFBcUMsRUFBRUwsZ0JBQWdCRyxNQUFNLEdBQUdEIiwic291cmNlcyI6WyJEOlxcR2l0SHViXFxFZHUtS2V5Y2hhaW5cXHNyY1xcbGliXFxkYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcclxuXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XHJcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRiID1cclxuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/XHJcbiAgbmV3IFByaXNtYUNsaWVudCh7XHJcbiAgICBsb2c6IFsncXVlcnknXSxcclxuICB9KVxyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBkYiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwiZGIiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fcertificates%2Froute&page=%2Fapi%2Fcertificates%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcertificates%2Froute.ts&appDir=D%3A%5CGitHub%5CEdu-Keychain%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CGitHub%5CEdu-Keychain&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();